<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jam Analog</title>
    <style>
        img{
            position: absolute;
            display: block;
            left: calc(50vw - 300px);
        }

        canvas{
            position: absolute;
            display: block;
            left: calc(50vw - 300px);
        }
    </style>
</head>
<body>
    <img src="bg-clock.png" width="600"/>
    <canvas width="600" height="600" id="myCanvas"></canvas>
</body>
<script>
    const centerX = 297; //posisi tengah jam
    const centerY = 295; //posisi tengah jam

    const lengthHour = 130; //panjang jarum jam
    const widthHour = 10; //tebal jarum jam
    
    const lengthMinute = 180; //panjang jarum menit
    const widthMinute = 6; //tebal jarum menit
    
    const lengthSecond = 200; //panjang jarum detik
    const widthSecond = 1; //tebal jarum detik

    const canvas = document.getElementById("myCanvas"); //dapatkan element canvas
    const ctx = canvas.getContext("2d"); //dapatkan contextnya untuk melakukan penggambaran

    //jalankan script di bawah ini setiap 1000 ms (1 detik)
    setInterval(function(){
        const date = new Date(); //buat object Date sesuai dengan waktu saat ini

        ctx.clearRect(0, 0, canvas.width, canvas.height); //hapus gambar saat ini
        
        drawArrowHour(date.getHours()); //gambar jarum jam
        drawArrowMinute(date.getMinutes()); //gambar jarum menit
        drawArrowSecond(date.getSeconds()); //gambar jarum detik
        
        //-- Gambar bulatan di tengah jam untuk menutupi pangkal jarum
        ctx.beginPath();
        ctx.fillStyle = '#dddddd';
        ctx.arc(centerX, centerY, 12, 0, 2 * Math.PI);
        ctx.fill();

    }, 1000);

    function drawArrowHour(value){
        // hitung sudut jarum jam
        // sudut dalam radian
        // rumus asli mengubah sudut derajat menjadi radian adalah:
        // sudut * Math.PI / 180
        // 180 derajat adalah setengah lingkaran
        // digunakan angka 6 karena setengah lingkaran pada jam adalah 6
        // sudut perlu digeser 3 angka, karena sudut 0 mulainya di atas
        // sedangkan sudut aslinya adalah mendatar, pada jam 3
        const angle = (value - 3) * Math.PI / 6;
        
        // dapatkan posisi x ujung jarum berdasarkan nilai cosinus dari sudut
        const lx = Math.cos(angle) * lengthHour;
        // dapatkan posisi y ujung jarum berdasarkan nilai sinus dari sudut
        const ly = Math.sin(angle) * lengthHour;

        //lakukan penggambaran
        ctx.beginPath();
        //pindahkan kursor ke tengah
        ctx.moveTo(centerX, centerY);
        //gambar garis dari tengah sampai ujung jarum
        ctx.lineTo(centerX + lx, centerY + ly);
        //tentukan ketebalan jarum jam
        ctx.lineWidth = widthHour;
        //tentukan warna jarum jam
        ctx.strokeStyle = '#2b1100';
        //gambarkan
        ctx.stroke();
    }

    function drawArrowMinute(value){
        // hitung sudut jarum menit
        // sudut dalam radian
        // rumus asli mengubah sudut derajat menjadi radian adalah:
        // sudut * Math.PI / 180
        // 180 derajat adalah setengah lingkaran
        // digunakan angka 30 karena setengah lingkaran pada menit adalah 30
        // sudut perlu digeser 15 angka, karena sudut 0 mulainya di atas
        // sedangkan sudut aslinya adalah mendatar, pada menit 15
        const angle = (value - 15) * Math.PI / 30;

        // dapatkan posisi x ujung jarum berdasarkan nilai cosinus dari sudut
        const lx = Math.cos(angle) * lengthMinute;
        // dapatkan posisi y ujung jarum berdasarkan nilai sinus dari sudut
        const ly = Math.sin(angle) * lengthMinute;

        //lakukan penggambaran
        ctx.beginPath();
        //pindahkan kursor ke tengah
        ctx.moveTo(centerX, centerY);
        //gambar garis dari tengah sampai ujung jarum
        ctx.lineTo(centerX + lx, centerY + ly);
        //tentukan ketebalan jarum menit
        ctx.lineWidth = widthMinute;
        //tentukan warna jarum menit
        ctx.strokeStyle = '#2b1100';
        //gambarkan
        ctx.stroke();
    }

    function drawArrowSecond(value){
        // hitung sudut jarum menit
        // sudut dalam radian
        // rumus asli mengubah sudut derajat menjadi radian adalah:
        // sudut * Math.PI / 180
        // 180 derajat adalah setengah lingkaran
        // digunakan angka 30 karena setengah lingkaran pada menit adalah 30
        // sudut perlu digeser 15 angka, karena sudut 0 mulainya di atas
        // sedangkan sudut aslinya adalah mendatar, pada menit 15
        const angle = (value - 15) * Math.PI / 30;
        // dapatkan posisi x ujung jarum berdasarkan nilai cosinus dari sudut
        const lx = Math.cos(angle) * lengthSecond;
        // dapatkan posisi y ujung jarum berdasarkan nilai sinus dari sudut
        const ly = Math.sin(angle) * lengthSecond;

        //lakukan penggambaran
        ctx.beginPath();
        //pindahkan kursor ke tengah
        ctx.moveTo(centerX, centerY);
        //gambar garis dari tengah sampai ujung jarum
        ctx.lineTo(centerX + lx, centerY + ly);
        //tentukan ketebalan jarum detik
        ctx.lineWidth = widthSecond;
        //tentukan warna jarum detik
        ctx.strokeStyle = '#ff0000';
        //gambarkan
        ctx.stroke();
    }

</script>
</html>
